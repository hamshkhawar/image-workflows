{
  "$namespaces": {
    "edam": "https://edamontology.org/"
  },
  "$schemas": [
    "https://raw.githubusercontent.com/edamontology/edamontology/master/EDAM_dev.owl"
  ],
  "class": "Workflow",
  "cwlJobInputs": {
    "viz_workflow_BBBC001__step__1__FileRenaming___filePattern": ".*_{row:c}{col:dd}f{f:dd}d{channel:d}.tif",
    "viz_workflow_BBBC001__step__1__FileRenaming___inpDir": {
      "class": "Directory",
      "location": "656a026764eac817407aae95/viz_workflow_BBBC001__step__1__BbbcDownload/InpDirFileRenaming/BBBC/BBBC001/raw/Images/human_ht29_colon_cancer_1_images"
    },
    "viz_workflow_BBBC001__step__1__FileRenaming___outDir": {
      "class": "Directory",
      "location": "inpDirOmeConverter"
    },
    "viz_workflow_BBBC001__step__1__FileRenaming___outFilePattern": "x{row:dd}_y{col:dd}_p{f:dd}_c{channel:d}.tif",
    "viz_workflow_BBBC001__step__2__OmeConverter___fileExtension": ".ome.tif",
    "viz_workflow_BBBC001__step__2__OmeConverter___filePattern": ".*.tif",
    "viz_workflow_BBBC001__step__2__OmeConverter___outDir": {
      "class": "Directory",
      "location": "inpDirMontage"
    },
    "viz_workflow_BBBC001__step__3__Montage___filePattern": "x00_y03_p{p:dd}_c0.ome.tif",
    "viz_workflow_BBBC001__step__3__Montage___layout": "p",
    "viz_workflow_BBBC001__step__3__Montage___outDir": {
      "class": "Directory",
      "location": "stitchPathImageAssembler"
    },
    "viz_workflow_BBBC001__step__4__ImageAssembler___outDir": {
      "class": "Directory",
      "location": "inpDirPrecomputeSlide"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___imageType": "image",
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___outDir": {
      "class": "Directory",
      "location": "out"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___pyramidType": "Zarr"
  },
  "cwlVersion": "v1.0",
  "driver": "argo",
  "inputs": {
    "viz_workflow_BBBC001__step__1__FileRenaming___filePattern": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__1__FileRenaming___inpDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__1__FileRenaming___outDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__1__FileRenaming___outFilePattern": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__2__OmeConverter___fileExtension": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__2__OmeConverter___filePattern": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__2__OmeConverter___outDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__3__Montage___filePattern": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__3__Montage___layout": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__3__Montage___outDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__4__ImageAssembler___outDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___imageType": {
      "type": "string"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___outDir": {
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___pyramidType": {
      "type": "string"
    }
  },
  "name": "viz_workflow_BBBC001",
  "outputs": {
    "viz_workflow_BBBC001__step__1__FileRenaming___outDir": {
      "outputSource": "viz_workflow_BBBC001__step__1__FileRenaming/outDir",
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__2__OmeConverter___outDir": {
      "outputSource": "viz_workflow_BBBC001__step__2__OmeConverter/outDir",
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__3__Montage___outDir": {
      "outputSource": "viz_workflow_BBBC001__step__3__Montage/outDir",
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__4__ImageAssembler___outDir": {
      "outputSource": "viz_workflow_BBBC001__step__4__ImageAssembler/outDir",
      "type": "Directory"
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide___outDir": {
      "outputSource": "viz_workflow_BBBC001__step__5__PrecomputeSlide/outDir",
      "type": "Directory"
    }
  },
  "steps": {
    "viz_workflow_BBBC001__step__1__FileRenaming": {
      "in": {
        "filePattern": {
          "source": "viz_workflow_BBBC001__step__1__FileRenaming___filePattern"
        },
        "inpDir": {
          "source": "viz_workflow_BBBC001__step__1__FileRenaming___inpDir"
        },
        "outDir": {
          "source": "viz_workflow_BBBC001__step__1__FileRenaming___outDir"
        },
        "outFilePattern": {
          "source": "viz_workflow_BBBC001__step__1__FileRenaming___outFilePattern"
        }
      },
      "out": [
        "outDir"
      ],
      "run": {
        "baseCommand": [
          "python3",
          "-m",
          "polus.plugins.formats.file_renaming"
        ],
        "class": "CommandLineTool",
        "cwlVersion": "v1.2",
        "inputs": {
          "filePattern": {
            "inputBinding": {
              "prefix": "--filePattern"
            },
            "type": "string"
          },
          "inpDir": {
            "inputBinding": {
              "prefix": "--inpDir"
            },
            "type": "Directory"
          },
          "mapDirectory": {
            "inputBinding": {
              "prefix": "--mapDirectory"
            },
            "type": "string?"
          },
          "outDir": {
            "inputBinding": {
              "prefix": "--outDir"
            },
            "type": "Directory"
          },
          "outFilePattern": {
            "inputBinding": {
              "prefix": "--outFilePattern"
            },
            "type": "string"
          },
          "subPath": {
            "inputBinding": {
              "prefix": "--subPath"
            },
            "type": "string?"
          }
        },
        "outputs": {
          "outDir": {
            "outputBinding": {
              "glob": "$(inputs.outDir.basename)"
            },
            "type": "Directory"
          }
        },
        "requirements": {
          "DockerRequirement": {
            "dockerPull": "polusai/file-renaming-plugin:0.2.1-dev0"
          },
          "InitialWorkDirRequirement": {
            "listing": [
              {
                "entry": "$(inputs.outDir)",
                "writable": true
              }
            ]
          },
          "InlineJavascriptRequirement": {}
        }
      }
    },
    "viz_workflow_BBBC001__step__2__OmeConverter": {
      "in": {
        "fileExtension": {
          "source": "viz_workflow_BBBC001__step__2__OmeConverter___fileExtension"
        },
        "filePattern": {
          "source": "viz_workflow_BBBC001__step__2__OmeConverter___filePattern"
        },
        "inpDir": {
          "source": "viz_workflow_BBBC001__step__1__FileRenaming/outDir"
        },
        "outDir": {
          "source": "viz_workflow_BBBC001__step__2__OmeConverter___outDir"
        }
      },
      "out": [
        "outDir"
      ],
      "run": {
        "baseCommand": [
          "python3",
          "-m",
          "polus.plugins.formats.ome_converter"
        ],
        "class": "CommandLineTool",
        "cwlVersion": "v1.2",
        "inputs": {
          "fileExtension": {
            "inputBinding": {
              "prefix": "--fileExtension"
            },
            "type": "string"
          },
          "filePattern": {
            "inputBinding": {
              "prefix": "--filePattern"
            },
            "type": "string"
          },
          "inpDir": {
            "inputBinding": {
              "prefix": "--inpDir"
            },
            "type": "Directory"
          },
          "outDir": {
            "inputBinding": {
              "prefix": "--outDir"
            },
            "type": "Directory"
          }
        },
        "outputs": {
          "outDir": {
            "outputBinding": {
              "glob": "$(inputs.outDir.basename)"
            },
            "type": "Directory"
          }
        },
        "requirements": {
          "DockerRequirement": {
            "dockerPull": "polusai/ome-converter-plugin:0.3.0"
          },
          "InitialWorkDirRequirement": {
            "listing": [
              {
                "entry": "$(inputs.outDir)",
                "writable": true
              }
            ]
          },
          "InlineJavascriptRequirement": {}
        }
      }
    },
    "viz_workflow_BBBC001__step__3__Montage": {
      "in": {
        "filePattern": {
          "source": "viz_workflow_BBBC001__step__3__Montage___filePattern"
        },
        "inpDir": {
          "source": "viz_workflow_BBBC001__step__2__OmeConverter/outDir"
        },
        "layout": {
          "source": "viz_workflow_BBBC001__step__3__Montage___layout"
        },
        "outDir": {
          "source": "viz_workflow_BBBC001__step__3__Montage___outDir"
        }
      },
      "out": [
        "outDir"
      ],
      "run": {
        "baseCommand": [
          "python3",
          "-m",
          "polus.plugins.transforms.images.montage"
        ],
        "class": "CommandLineTool",
        "cwlVersion": "v1.2",
        "inputs": {
          "filePattern": {
            "inputBinding": {
              "prefix": "--filePattern"
            },
            "type": "string"
          },
          "flipAxis": {
            "inputBinding": {
              "prefix": "--flipAxis"
            },
            "type": "string?"
          },
          "gridSpacing": {
            "inputBinding": {
              "prefix": "--gridSpacing"
            },
            "type": "string?"
          },
          "imageSpacing": {
            "inputBinding": {
              "prefix": "--imageSpacing"
            },
            "type": "string?"
          },
          "inpDir": {
            "inputBinding": {
              "prefix": "--inpDir"
            },
            "type": "Directory"
          },
          "layout": {
            "inputBinding": {
              "prefix": "--layout"
            },
            "type": "string?"
          },
          "outDir": {
            "inputBinding": {
              "prefix": "--outDir"
            },
            "type": "Directory"
          }
        },
        "outputs": {
          "outDir": {
            "outputBinding": {
              "glob": "$(inputs.outDir.basename)"
            },
            "type": "Directory"
          }
        },
        "requirements": {
          "DockerRequirement": {
            "dockerPull": "polusai/montage-plugin:0.5.0"
          },
          "InitialWorkDirRequirement": {
            "listing": [
              {
                "entry": "$(inputs.outDir)",
                "writable": true
              }
            ]
          },
          "InlineJavascriptRequirement": {}
        }
      }
    },
    "viz_workflow_BBBC001__step__4__ImageAssembler": {
      "in": {
        "imgPath": {
          "source": "viz_workflow_BBBC001__step__2__OmeConverter/outDir"
        },
        "outDir": {
          "source": "viz_workflow_BBBC001__step__4__ImageAssembler___outDir"
        },
        "stitchPath": {
          "source": "viz_workflow_BBBC001__step__3__Montage/outDir"
        }
      },
      "out": [
        "outDir"
      ],
      "run": {
        "baseCommand": [
          "python3",
          "-m",
          "polus.plugins.transforms.images.image_assembler"
        ],
        "class": "CommandLineTool",
        "cwlVersion": "v1.2",
        "inputs": {
          "imgPath": {
            "inputBinding": {
              "prefix": "--imgPath"
            },
            "type": "Directory"
          },
          "outDir": {
            "inputBinding": {
              "prefix": "--outDir"
            },
            "type": "Directory"
          },
          "preview": {
            "inputBinding": {
              "prefix": "--preview"
            },
            "type": "boolean?"
          },
          "stitchPath": {
            "inputBinding": {
              "prefix": "--stitchPath"
            },
            "type": "Directory"
          },
          "timesliceNaming": {
            "inputBinding": {
              "prefix": "--timesliceNaming"
            },
            "type": "boolean?"
          }
        },
        "outputs": {
          "outDir": {
            "outputBinding": {
              "glob": "$(inputs.outDir.basename)"
            },
            "type": "Directory"
          }
        },
        "requirements": {
          "DockerRequirement": {
            "dockerPull": "polusai/image-assembler-plugin:1.4.0-dev0"
          },
          "InitialWorkDirRequirement": {
            "listing": [
              {
                "entry": "$(inputs.outDir)",
                "writable": true
              }
            ]
          },
          "InlineJavascriptRequirement": {}
        }
      }
    },
    "viz_workflow_BBBC001__step__5__PrecomputeSlide": {
      "in": {
        "imageType": {
          "source": "viz_workflow_BBBC001__step__5__PrecomputeSlide___imageType"
        },
        "inpDir": {
          "source": "viz_workflow_BBBC001__step__4__ImageAssembler/outDir"
        },
        "outDir": {
          "source": "viz_workflow_BBBC001__step__5__PrecomputeSlide___outDir"
        },
        "pyramidType": {
          "source": "viz_workflow_BBBC001__step__5__PrecomputeSlide___pyramidType"
        }
      },
      "out": [
        "outDir"
      ],
      "run": {
        "baseCommand": [
          "python3",
          "-m",
          "polus.plugins.visualization.precompute_slide"
        ],
        "class": "CommandLineTool",
        "cwlVersion": "v1.2",
        "inputs": {
          "filePattern": {
            "inputBinding": {
              "prefix": "--filePattern"
            },
            "type": "string?"
          },
          "imageType": {
            "inputBinding": {
              "prefix": "--imageType"
            },
            "type": "string?"
          },
          "inpDir": {
            "inputBinding": {
              "prefix": "--inpDir"
            },
            "type": "Directory"
          },
          "outDir": {
            "inputBinding": {
              "prefix": "--outDir"
            },
            "type": "Directory"
          },
          "pyramidType": {
            "inputBinding": {
              "prefix": "--pyramidType"
            },
            "type": "string"
          }
        },
        "outputs": {
          "outDir": {
            "outputBinding": {
              "glob": "$(inputs.outDir.basename)"
            },
            "type": "Directory"
          }
        },
        "requirements": {
          "DockerRequirement": {
            "dockerPull": "polusai/precompute-slide-plugin:1.7.0-dev0"
          },
          "InitialWorkDirRequirement": {
            "listing": [
              {
                "entry": "$(inputs.outDir)",
                "writable": true
              }
            ]
          },
          "InlineJavascriptRequirement": {}
        }
      }
    }
  }
}
